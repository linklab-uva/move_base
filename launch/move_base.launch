<?xml version='1.0'?>

<launch>

  <!-- agent properties -->
  <arg         name           = 'car_name'
               default        = 'car_1'/>

  <!-- load VESC odometry parameters -->
  <arg         name           = 'vesc_config'
               default        = '$(find move_base)/config/vesc_config.yaml'/>
  <rosparam    file           = '$(arg vesc_config)'
               command        = 'load'/>

  <group       ns             = '(arg car_name)'>
  <!-- launch VESC node driver -->
  <node        name           = 'vesc_driver'
               pkg            = 'vesc_driver'
               type           = 'vesc_driver_node'>
  <param       name           = 'port'
               value          = '/dev/ttyACM1'/> </node>

  <!-- launch VESC odometry calculator -->
  <node        name           = 'vesc_to_odom'
               pkg            = 'vesc_ackermann'
               type           = 'vesc_to_odom_node'/>

  <!-- URG LiDAR node -->
  <node        name           = 'urg_laser_scanner'
               pkg            = 'urg_node'
               type           = 'urg_node'>
  <param       name           = 'serial_port'
               value          = '/dev/ttyACM0'/>
  <param       name           = 'serial_baud'
               value          = '115200'/>
  <param       name           = 'frame_id'
               value          = '(arg car_name)_laser'/> </node>

  <!-- joystick remote-teleop node -->
  <node        name           = 'remote_control'
               pkg            = 'move_base'
               type           = 'joy_teleop.py'
               args           = '$(arg car_name)'/>

  <!-- move_base node -->
  <node        name           = 'move_base'
               pkg            = 'move_base'
               type           = 'move_base.py'
               args           = '$(arg car_name) priority_teleop'/> </group>

</launch>
